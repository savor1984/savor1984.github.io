/*!
 * jQuery FancyZoom Plugin
 * version: 1.00 (18-AUG-2011)
 * @requires jQuery v1.6.2 or later
 *
 * Examples and documentation at: http://github.com/krug/jquery.fancyzoom/
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */(function(a){a.extend(jQuery.easing,{easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}}),a.fn.fancyZoom=function(b){function e(a){var b=0,c=0,d=50,e=12;a.childNodes.length>0&&(a=a.childNodes[0]),a.width&&a.height&&(d=a.width,e=a.height);do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{left:b,top:c,width:d,height:e}}function f(){var a=window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth||0,b=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight||0,c=window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft||0,d=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop||0;return{width:a,height:b,scrollX:c,scrollY:d}}function g(b){function q(a){g?(m.css("backgroundPosition","0px "+j*-50+"px"),++j==12&&(j=0)):(clearInterval(i),i=0,m.hide(),s(a))}function r(a){m.css({left:l.width/2+l.scrollX+"px",top:l.height/2+l.scrollY+"px",backgroundPosition:"0px 0px",display:"block"}),j=1,i=setInterval(function(){q(a)},100)}function s(b){if(d)return!1;d=!0,o.attr("src",b.getAttribute("href"));var e=h.width,f=h.height,g=e/f;e>l.width-c.minBorder&&(e=l.width-c.minBorder,f=e/g),f>l.height-c.minBorder&&(f=l.height-c.minBorder,e=f*g);var i=l.height/2-f/2+l.scrollY,j=l.width/2-e/2+l.scrollX;p.hide(),n.hide().css({left:k.left+"px",top:k.top+"px",width:k.width+"px",height:k.height+"px"}),n.animate({left:j+"px",top:i+"px",width:e+"px",height:f+"px",opacity:"show"},200,"easeInOutCubic",function(){p.fadeIn(),p.click(t),n.click(t),a(document).keyup(u),d=!1})}function t(){if(d)return!1;d=!0,p.hide(),n.animate({left:k.left+"px",top:k.top+"px",opacity:"hide",width:k.width+"px",height:k.height+"px"},200,"easeInOutCubic",function(){d=!1}),n.unbind("click",t),p.unbind("click",t),a(document).unbind("keyup",u)}function u(a){a.keyCode==27&&t()}var c=b,d=!1,g=!1,h=new Image,i=0,j=0,k,l,m,n,o,p;m=a("#zoom_spin"),m.length===0&&(m=a(document.createElement("div")),m.attr("id","zoom_spin"),a("body").append(m)),n=a("#zoom"),n.length===0&&(n=a(document.createElement("div")),n.attr("id","zoom"),a("body").append(n)),o=a("#zoom_img"),o.length===0&&(o=a(document.createElement("img")),o.attr("id","zoom_img"),n.append(o)),p=a("#zoom_close"),p.length===0&&(p=a(document.createElement("div")),p.attr("id","zoom_close"),n.append(p)),this.preload=function(b){var c=this.getAttribute("href");h.src!=c&&(g=!0,h=new Image,a(h).load(function(){g=!1}),h.src=c)},this.show=function(a){l=f(),k=e(this),g?i===0&&r(this):s(this),a.preventDefault()}}var c=a.extend({minBorder:90},b),d=new g(c);this.each(function(b){a(this).mouseover(d.preload),a(this).click(d.show)})}})(jQuery);