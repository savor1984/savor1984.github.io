<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Savor Live</title>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="savor photo" />
        <meta name="keywords" content="savor,photo,flickr" />
        <meta name="googlebot" content="all" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico">
        <link rel="stylesheet" href="css/fancyzoom.css">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Playfair+Display:400italic' rel='stylesheet' type='text/css' />
		<!-- CSS Reset -->
		<link rel="stylesheet" href="css/reset.css">
        <!-- Global CSS for the page and tiles -->
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script src="js-global/FancyZoom.js" type="text/javascript"></script>
	    <script src="js-global/FancyZoomHTML.js" type="text/javascript"></script>
		<noscript>
           <link rel="stylesheet" type="text/css" href="css/noscript.css" />
        </noscript>
		</head>
    <body>
        <div class="container">
            <div class="header">
                <a href="index.html">
                    <strong>Home Page</strong>
                </a>
                <span class="right">
                    <a href="https://www.flickr.com/photos/savor1984/" target="_blank">Images by Savor1984</a>
                    
                    </a>
                </span>
                
            </div>
            <h1>Savor Live</h1>
            <div id="main" class="wrapper">
                <div id="ei-slider" class="ei-slider">
                    <ul class="ei-slider-large">
                        <li>
                            <img id="pg" src="images/large/1.jpg"  alt="pg1" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/2.jpg"  alt="pg2" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/3.jpg"  alt="pg3" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/4.jpg"  alt="pg4" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/5.jpg"  alt="pg5" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/6.jpg"  alt="pg6" style="cursor:pointer;"/>
                        </li>
                        <li>
                            <img id="pg" src="images/large/7.jpg"  alt="pg7" style="cursor:pointer;"/>
             		   </li>
                    </ul><!-- ei-slider-large -->
                    <ul class="ei-slider-thumbs">
                        <li class="ei-slider-element">Current</li>
                        <li><a href="#">Slide 1</a><img src="images/thumbs/1.jpg" alt="thumb01" /></li>
                        <li><a href="#">Slide 2</a><img src="images/thumbs/2.jpg" alt="thumb02" /></li>
                        <li><a href="#">Slide 3</a><img src="images/thumbs/3.jpg" alt="thumb03" /></li>
                        <li><a href="#">Slide 4</a><img src="images/thumbs/4.jpg" alt="thumb04" /></li>
                        <li><a href="#">Slide 5</a><img src="images/thumbs/5.jpg" alt="thumb05" /></li>
                        <li><a href="#">Slide 6</a><img src="images/thumbs/6.jpg" alt="thumb06" /></li>
                        <li><a href="#">Slide 7</a><img src="images/thumbs/7.jpg" alt="thumb07" /></li>
                    </ul><!-- ei-slider-thumbs -->
                </div><!-- ei-slider -->
                <div class="reference">
					<p>Welcome</p>
                </div>
				
            </div><!-- wrapper -->
        </div>
		<div id="preloader" style="display:none;"></div>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	    <!-- include jQuery -->
	    <script src="libs/jquery.min.js"></script>
		<!-- Include the plug-in -->
	    <script src="libs/jquery.wookmark.js"></script>
        <script type="text/javascript" src="js/jquery.eislideshow.js"></script>
        <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
		<script type="text/javascript">
		
		$(function() {
		  $('#ei-slider').eislideshow({
		                              easing		: 'easeOutExpo',
		                              titleeasing	: 'easeOutExpo',
		                              titlespeed	: 1200
		                              });
		  });
  
		  function rnd(start,end){
		       return Math.floor(Math.random() * (end - start) + start);
		  }
  
		  $("#pg").click(function(){
	  
			  var page = $(this).attr('alt');
			  var dir = 0;
			  if(page=='pg1'){
				  dir = 10;//设置目录下照片张数
			  }
	  
			  //$('#preloader').after('<div id="preloader" style="visibility:hidden;"></div>').remove();
			  for(var i = 1;i <= dir;i++){
				  $("#preloader").append('<img src="images/scale/'+page+'/large/'+i+'.jpg">');
			  }
	  
			  $("#main").load(page+".html",function(responseTxt,statusTxt,xhr){
		  
				  if(statusTxt=="success"){
					$('#tiles').hide(); 
		  	
					for(var i = 1;i <= dir;i++){
						$("#tiles").append('<li id="photo"><a href="images/scale/'+page+'/large/'+i+'.jpg"  title=""><img src="images/scale/'+page+'/small/'+i+'.jpg" style="width:200px;max-height:500px;"></a></li>');
				
					}
			
					var imgCount = $('#tiles img').length;
					console.log(imgCount);
			
					$('#tiles img').each(function (index,element) {
						function ImageLoading() {
							msg = "Image: " + element.src + "....done";
							console.msg(msg);
							imgCount--;
							if(imgCount==0){
								console.msg("all done");
							}
						}
				
						if($(element).complete;){
							imageLoaded.call(element);
						}else{
							$(element).one('load', ImageLoading);
						}
			
					});
			
			
					setupZoom();//加载弹出图片方法
			
					$('#tiles').fadeIn(2000);
			
			        (function ($){
					 var handler = $('#tiles li');

			         handler.wookmark({
			           // Prepare layout options.
			           autoResize: true, // This will auto-update the layout when the browser window is resized.
			           container: $('#mainpg1'), // Optional, used for some extra CSS styling
			           offset: 5, // Optional, the distance between grid items
			           outerOffset: 10, // Optional, the distance to the containers border
			           itemWidth: 210 // Optional, the width of a grid item
			         });

			       // Capture clicks on grid items.
		   
				     //$('#tiles').show();
			 

			     	})(jQuery);
				  }
		  
		 
		        
			      if(statusTxt=="error")
		  
			        alert("Error: "+xhr.status+": "+xhr.statusText);
			    });
		  });
		  </script>
        
    </body>
</html>